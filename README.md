# Kage

Kage is a PHP code encryption and protection tool that helps secure your PHP source code by encrypting it and providing a secure runtime environment for execution.

## Project Structure

```
Kage/
├── src/                    # Source code files
│   ├── encoder.php        # Main encoder implementation
│   ├── source.php         # Source code handling
│   ├── php_encoder.php    # PHP-specific encoding utilities
│   ├── decrypt_string.php # String decryption utilities
│   └── create_self_decrypt.php # Self-decrypting file generator
├── tests/                  # Test files
│   ├── test_source.php
│   ├── test_php_encoder.php
│   ├── test_kage_extension.php
│   ├── test_source_encrypted.php
│   ├── test_ast.php
│   └── test_vm.php
├── logs/                   # Log files
│   ├── php_errors.log
│   └── kage_extension_errors.log
├── config/                 # Configuration files
│   └── php.ini
├── build/                  # Build artifacts
│   └── debug_raw_file_content.bin
├── docs/                   # Documentation
├── c_extension/           # C extension for enhanced performance
└── artifacts/             # Additional build artifacts
```

## Features

- PHP source code encryption
- Self-decrypting file generation
- Secure runtime execution
- C extension support for enhanced performance
- Comprehensive test suite

## Requirements

- PHP 7.4 or higher
- PHP C extension (optional, for enhanced performance)

## Installation

1. Clone the repository:
```bash
git clone https://github.com/yourusername/kage.git
cd kage
```

2. Install dependencies (if any):
```bash
composer install
```

3. Configure PHP:
   - Copy `config/php.ini` to your PHP configuration directory
   - Enable required PHP extensions

## Building

The project includes a C extension for enhanced performance. To build it, navigate to the `c_extension` directory and use the provided shell scripts.

1.  **Build the C Extension:**
    ```bash
    cd c_extension
    ./build.sh
    ```
    This script will compile the C extension.

2.  **Clean Build Artifacts:**
    ```bash
    cd c_extension
    ./cleanup.sh
    ```
    This script will remove the build artifacts generated by `build.sh`.

## Usage

### Basic Usage

```php
require_once 'src/encoder.php';

// Create an instance of the encoder
$encoder = new Encoder();

// Encrypt your PHP code
$encrypted = $encoder->encrypt($sourceCode);

// Save the encrypted code
file_put_contents('encrypted.php', $encrypted);
```

### Creating Self-Decrypting Files

```php
require_once 'src/create_self_decrypt.php';

// Create a self-decrypting file
$selfDecrypt = new SelfDecrypt();
$selfDecrypt->create('source.php', 'output.php');
```

## Testing

Run the test suite:
```bash
php tests/test_php_encoder.php
```

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Security

If you discover any security related issues, please email security@yourdomain.com instead of using the issue tracker.

## Support

For support, please open an issue in the GitHub repository or contact support@yourdomain.com.
